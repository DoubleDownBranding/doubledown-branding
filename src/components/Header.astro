---
---
<style>
  :root {
    --header-h-desktop: 88px;
    --header-h-mobile: 64px; /* base; actual height can grow when menu wraps */
  }

  nav {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 10000;
    background-color: #0D1A5A;

    display: flex;
    justify-content: space-between;
    align-items: center;

    padding: 0 2rem;
    height: var(--header-h-desktop);
  }

  .logo { height: 56px; display: block; }

  ul {
    list-style: none;
    display: flex;
    gap: 3rem;
    margin: 0;
    padding: 0;
    flex-wrap: nowrap; /* desktop: single row, no wrap */
  }

  li a {
    position: relative;
    color: #f6e4cc;
    text-decoration: none;
    font-weight: bold;
    font-family: 'Gotham', sans-serif;
    font-size: 2rem;
    transition: color 0.3s ease;
    white-space: nowrap;
  }

  li a::after {
    content: '';
    position: absolute;
    bottom: -6px;
    left: 0;
    width: 0%;
    height: 2px;
    background-color: #ef3741;
    transition: width 0.1s ease;
  }

  li a:hover { color: #ef3741; }
  li a:hover::after { width: 100%; }

  /* MOBILE: allow wrap & scale for big phones */
  @media (max-width: 1100px) {
    nav {
      height: auto; /* let header grow if menu wraps to 2 lines */
      padding: 0.5rem 1rem 0.75rem;
      flex-direction: column;  /* logo on top, menu below */
      align-items: center;
      gap: 0.5rem;
    }

    .logo { height: clamp(50px, 9vw, 64px); }

    ul {
      width: 100%;
      justify-content: center;
      gap: 0.9rem 1.1rem;   /* row-gap col-gap */
      flex-wrap: wrap;     /* <-- allow wrapping */
      padding: 0 0.5rem;
    }

    li a {
      font-size: clamp(1.25rem, 5vw, 1.9rem);
      line-height: 1.3;
      white-space: normal; /* allow break if needed */
      word-break: keep-all;
    }
  }
</style>

<nav aria-label="Primary">
  <a href="https://doubledownbranding.com/">
    <!-- Case must match file on Netlify -->
    <img src="/images/uploads/Logo.png" alt="Double Down Logo" class="logo" />
  </a>
  <ul>
    <li><a href="/about">ABOUT</a></li>
    <li><a href="/blog">RESEARCH</a></li>
    <li><a href="/services">SERVICES</a></li>
    <li><a href="/contact">CONTACT</a></li>
  </ul>
</nav>

<!-- Netlify Identity on every page to handle invites/login -->
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
<script>
  (function () {
    try {
      // If an invite link lands anywhere with #invite_token, route it to /admin with token intact
      if (location.hash && location.hash.indexOf('invite_token=') !== -1) {
        var target = '/admin/' + location.hash;
        if (window.location.pathname !== '/admin/') {
          window.location.replace(target);
          return;
        }
      }
    } catch (e) {
      /* no-op */
    }
  })();
</script>
<script is:inline>
  (function () {
    const root = document.documentElement;
    const nav = document.querySelector('nav');
    function setHeaderVar() {
      if (!nav) return;
      const h = nav.offsetHeight || 88;
      root.style.setProperty('--dd-header-h', h + 'px');
    }
    setHeaderVar();
    // Recalculate on resize and after fonts load (so wrapped menus are covered)
    window.addEventListener('resize', setHeaderVar, { passive: true });
    if (document.fonts && document.fonts.ready) {
      document.fonts.ready.then(setHeaderVar);
    }
  })();
</script>

<!-- Auto-spacer: only adds space on pages that DON'T use BaseLayout -->
<script is:inline>
  (function () {
    // Pages using BaseLayout set data-uses-baselayout="true" on <body>; skip spacer there
    if (document.body && document.body.getAttribute('data-uses-baselayout') === 'true') return;

    function ensureHeaderSpacer() {
      var header = document.querySelector('nav');
      if (!header) return;

      // Find or create a spacer right after the header
      var next = header.nextElementSibling;
      var spacer = (next && next.classList && next.classList.contains('header-spacer'))
        ? next
        : (function () {
            var d = document.createElement('div');
            d.className = 'header-spacer';
            header.parentNode.insertBefore(d, header.nextSibling);
            return d;
          })();

      // Match spacer to the header's current height (handles 1-line/2-line nav on big phones)
      var h = Math.ceil(header.getBoundingClientRect().height);
      spacer.style.height = h + 'px';
      spacer.style.width = '100%';
      spacer.style.pointerEvents = 'none';
      spacer.setAttribute('aria-hidden', 'true');
    }

    document.addEventListener('DOMContentLoaded', ensureHeaderSpacer);
    window.addEventListener('load', ensureHeaderSpacer);
    window.addEventListener('resize', ensureHeaderSpacer);
  })();
</script>
